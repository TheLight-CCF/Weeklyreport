# 信息安全管理与评估

本文档旨为了梳理信息安全管理与评估赛项的相关知识点，以供后续查漏补缺。

#### 网络平台搭建(权重7%)

**网络规划方案（5%）**

+ 网络拓扑设计
  + 物理拓扑
  + 逻辑拓扑
  + 冗余和高可用性

+ IP地址规划
  + 公网与私网IP规划。
  + 子网划分：划分VLAN；使用VLSM（可变长子网掩码）优化IP资源利用率。
  + 地址管理：静态IP及DHCP分配策略；使用NAT进行公网地址转换。
  
  **VLSM(可变长子网掩码，Variable Length Subnet Mask)：**
  
  允许在同一网络中使用不同长度的子网掩码中，这意味着可以节约一部分IP地址资源。
  
  
  
  VLSM的优势是：提高地址利用率、增强网络可扩展性、优化路由表、支持层次化设计。
  
  
  
  VLSM 计算示例：假设有一个 **192.168.1.0/24** 的网络，我们需要创建以下子网：
  
  + 一个需要 50 台主机的子网
  + 两个需要 20 台主机的子网
  + 两个需要 10 台主机的子网
  + 若干点对点（P2P）子网（每个子网 2 台主机）
  
  步骤一：确定子网掩码
  
  + 50 台主机：需要至少 52 个 IP 地址（50 台主机 + 1 个网络地址 + 1 个广播地址）
    + 最小掩码：/26（提供62个主机地址）
  + 20 台主机：需要至少 22 个 IP 地址
    + 最小掩码：/27（提供 30 个主机地址）
  + 10 台主机：需要至少 12 个 IP 地址
    + 最小掩码：/28（提供 14 个主机地址）
  + 点对点子网（2台主机）
    + 最小掩码：/30（提供 2 个可用 IP 地址）
  
  步骤二：子网划分
  
  | 子网                | 子网地址         | 掩码            | 可用 IP 地址数 |
  | ------------------- | ---------------- | --------------- | -------------- |
  | 子网 A（50 台主机） | 192.168.1.0/26   | 255.255.255.192 | 62             |
  | 子网 B（20 台主机） | 192.168.1.64/27  | 255.255.255.224 | 30             |
  | 子网 C（20 台主机） | 192.168.1.96/27  | 255.255.255.224 | 30             |
  | 子网 D（10 台主机） | 192.168.1.128/28 | 255.255.255.240 | 14             |
  | 子网 E（10 台主机） | 192.168.1.144/28 | 255.255.255.240 | 14             |
  | P2P 子网 1          | 192.168.1.160/30 | 255.255.255.252 | 2              |
  | P2P 子网 2          | 192.168.1.164/30 | 255.255.255.252 | 2              |
  
  ---
  
  
  
  **CIDR（无类域间路由，Classless Inter-Domain Routing）简介**
  
  在最初的 IPv4 地址分配体系中，IP 地址被划分为 A、B、C、D、E 五类。这种基于类别的地址分配方式导致大量 IP 地址浪费。例如，一个公司如果只需要 1000 个 IP 地址，却申请到一个 B 类地址（/16）（65,536 个 IP），将造成巨大浪费。
  
  CIDR的核心思想是：1、去掉IP地址类别的限制，采用IP+任意长度子网掩码的表示方式。2、路由聚合，允许多个连续的 IP 网络合并成一个更大的地址块，以减少路由表条目。
  
  
  
  CIDR计算示例：
  
  假设 ISP 拥有 200.10.0.0/22 的地址段，它需要为 4 个客户分配 IP：
  
  + 客户A 需要 100 个 IP
  + 客户B 需要 50 个 IP
  + 客户C 需要 25 个 IP
  + 客户C 需要 10 个 IP
  
  步骤一：确定每个子网的掩码
  
  | 需求 | 最少可用 IP | 最优掩码 | 分配网络        |
  | ---- | ----------- | -------- | --------------- |
  | 100  | 126         | /25      | 200.10.0.0/25   |
  | 50   | 62          | /26      | 200.10.0.128/26 |
  | 25   | 30          | /27      | 200.10.0.192/27 |
  | 10   | 14          | /28      | 200.10.0.224/28 |
  
  步骤二：CIDR 路由聚合
  
  假设 ISP 向 BGP 伙伴通告：200.10.0.0/22
  
  这样，外部路由器只需要一个路由条目，而不需要单独存储 4 条不同的路由，减少了 BGP 路由表的规模。
  
  ---
  
  
  
+ 网络设备选型
  + 路由器、交换机、无线设备的选型。
  
+ 路由与协议规划
  + 静态路由和动态路由，动态路由协议的选择：OSPF、BGP、RIP、EIGRP。
  
  + OSPF设计
    + 选择单区域、多区域结构，ABR 设计。
    + LSDB（链路状态数据库）优化，减少 SPF 计算压力。
    
  + BGP规划
    + eBGP 与 iBGP 结构设计，避免全互联问题。
    + 路由策略控制（route-map、prefix-list、AS-path 过滤）。
    
  + VLAN以及三层互通
    + VLAN 划分、VLAN Trunk（802.1Q）。
    + 采用三层交换机实现 VLAN 互通。
    
    Vlan，Virtual Local Area Network，即虚拟局域网，基于交换机的逻辑网络划分技术。

+ 网络安全策略
  + 边界安全
  + 终端安全
  + 数据加密
    + IPsec VPN、SSL VPN 远程接入；HTTPS、TLS/SSL 保护数据传输。
+ QoS及流量优化
  + 流量优先级
  + 宽带管理
  + 负载均衡
+ 运维和监控
  + 网络监控
    + SNMP 监控（Zabbix、Nagios）；NetFlow/SFlow 分析流量趋势。
  + 日志管理
  + 故障恢复

**按照等保要求进行网络设备配 置，提交相关配置文件或截图文件(2%)**

#### 网络安全设备配置与防护（权重18%）

**密码学基础理论**

+ 相关概念
  + 了解明文、密文、加密、解密、密钥、加密算法
+ 对称加密(Symmetric Encryption)
  + 采用相同的密钥进行加密和解密，速度快，适用于大数据量加密。
  + 常见算法：DES、3DES、AES、RC4、SM4。
+ 非对称加密(Asymmetric Encryption)
  + 使用一对公钥+私钥。
  + 常见算法：RSA、ECC（椭圆曲线加密）、DSA（数字签名算法）、SM2
+ 哈希函数
  + 一种不可逆的单向加密，用于数据完整性校验和密码存储。
  + MD5（已破解）、SHA-1（已破解）、SHA-256 / SHA-512、SM3
+ 数字签名
  + 非对称加密算法的一种
  + 发送方用私钥对消息哈希值进行签名。接收方用发送方公钥验证签名是否匹配哈希值。
  + 常见算法：RSA + SHA-256；DSA + SHA-256；ECC（ECDSA）
+ 证书与公钥基础设置（PKI）
  + 用于管理数字证书和密钥对
  + 由**CA（证书颁发机构）**签发，包含公钥、持有者信息、有效期等。
  + 常见证书格式：X.509证书、PEM、DER
+ 传输层安全协议（SSL/TLS）
  + 用于加密互联网通信，保障数据传输安全性。

**防火墙相关配置截图文件**

+ 访问控制列表（ACL）
+ 网络地址转换（NAT）
+ 防火墙的VPN配置
+ 入侵防御（IPS/IDS）
+ DDos防护

**网络日志系统相关配置截图文件**

+ 系统日志（Syslog）、防火墙日志、IDS/IPS 日志、VPN 日志、上网行为日志、
+ 日志传输协议
  + Syslog、SNMP（Simple Network Management Protocol）、NetFlow/IPFIX、RADIUS/TACACS+。

**无线控制器相关配置截图文件**

+ 无线控制器（WLC）基础
  + 作用
  + 部署模式
+ 无线网络配置
  + SSID配置
  + VLAN与接口映射
+ 无线安全策略
  + 认证方式
  + 访客网络安全
  + MAC地址过滤
+ 无线漫游
  + L2、L3漫游
  + 快速漫游
+ 无线QoS配置
  + 级别、速率限制
+ 无线干扰与优化
  + 信道规划
  + 发射功率控制
+ WLC高可用性（HA）
  + 主备切换

**三层交换机相关配置截图文件**

三层交换机（L3 Switch）是连接多个 VLAN 并提供路由功能的核心设备。它结合了二层交换（MAC 地址转发）和三层路由（IP 地址转发）的功能，在提高网络性能的同时提供了基本的安全防护能力。

+ 三层交换机的基本功能

与二层交换机对比。

| 功能      | 二层交换机（L2 Switch）      | 三层交换机（L3 Switch）              |
| --------- | ---------------------------- | ------------------------------------ |
| 主要作用  | 依据 MAC 地址进行数据转发    | 依据 IP 地址进行数据转发（路由功能） |
| VLAN 支持 | 仅 VLAN 划分，无 IP 路由功能 | 支持 VLAN 划分，并可在 VLAN 之间路由 |
| 路由功能  | 需要外部路由器               | 内置路由功能（静态路由、动态路由）   |
| 典型应用  | 局域网交换（接入层）         | 核心交换、VLAN 间路由                |

+ VLAN配置

  + 创建vlan
  + 配置vlan接口（SVI）
  + 端口模式：Access、Trunk

+ VLAN间路由

  + 通过三层交换机实现VLAN间通信
  + 启动IP路由
  + 配置静态路由

+ 动态路由协议

  + OSPF配置
  + RIP配置

+ 端口安全(Port Security)

  + 限制接入MAC配置
  + 启动 MAC 绑定

+ 访问控制列表（ACL）

  + 配置标准ACL
  + 配置扩展ACL

+ DHCP服务器配置

  + 配置DHCP池
  + 配置DHCP监听（Snooping）

+ 生成树（STP）协议

  + 启动 STP
  + 配置端口快速启用

+ VRRP/HSRP（网关冗余）

  + ```shell
    interface Vlan10
    vrrp 1 ip 192.168.10.254
    vrrp 1 priority 110
    vrrp 1 preempt
    ```

  + ```shell
    interface Vlan10
    standby 1 ip 192.168.10.254
    standby 1 priority 110
    standby 1 preempt
    ```

#### 网络安全事件响应（权重10%）

+ 网络安全事件响应的基本流程

一般安全事件响应遵循**NIST（美国国家标准与技术研究院）**或**SANS（信息安全研究所）**模型，包含以下阶段：

| **阶段**                                 | **主要任务**                                   |
| ---------------------------------------- | ---------------------------------------------- |
| ① **准备（Preparation）**                | 事件响应计划、团队培训、日志管理、安全工具部署 |
| ② **检测与分析（Detection & Analysis）** | 监控、日志分析、流量分析、入侵检测             |
| ③ **遏制（Containment）**                | 关闭受感染主机、隔离受害系统、防止扩散         |
| ④ **根除（Eradication）**                | 删除恶意软件、修复漏洞、升级安全策略           |
| ⑤ **恢复（Recovery）**                   | 恢复系统、验证完整性、重新上线                 |
| ⑥ **事后复盘（Lessons Learned）**        | 复盘分析、改进防御措施、编写事件报告           |

+ 攻击类型分类
  + 恶意软件感染（Malware)、网络攻击（Network Attack）、数据泄露（Data Breach）、权限滥用（Privilege Misuse）、拒绝服务攻击（DoS/DDoS）

+ 事件检测
  + 监控与日志分析、流量分析、端点检测
+ 事件响应措施
  + 遏制（Containment）、根除（Eradication）、恢复（Recovery）
+ 事件响应工具

| **类别**         | **工具**                        |
| ---------------- | ------------------------------- |
| **日志分析**     | Splunk、ELK、Graylog            |
| **流量分析**     | Wireshark、Zeek（Bro）、NetFlow |
| **恶意软件分析** | Cuckoo Sandbox、VirusTotal      |
| **主机检测**     | Sysmon、OSSEC、Velociraptor     |
| **取证分析**     | Autopsy、FTK Imager、Volatility |

+ 关键安全策略
  + 最小权限原则（Least Privilege）
    + 限制管理员权限
    + 使用零信任（Zero Trust）架构
  + 访问控制
    + MFA（多因素认证）
    + RBAC（基于角色的访问控制）
  + 安全补丁管理
    + 定期更新 OS、软件
    + 漏洞扫描（Nessus、OpenVAS）
  + 安全备份
    + 3-2-1 备份策略（3 份副本，2 种存储介质，1 份离线备份）
    + 冷备份 vs. 热备份
+ 典型安全事件案例

| **事件**                  | **影响**                   | **响应措施**                 |
| ------------------------- | -------------------------- | ---------------------------- |
| **WannaCry 勒索病毒**     | 全球范围内勒索软件攻击     | 关闭 SMBv1、打补丁、数据备份 |
| **SolarWinds 供应链攻击** | 黑客利用软件供应链植入后门 | 禁用受影响软件、重置凭据     |
| **DDoS 攻击**             | 企业服务器宕机             | 部署 CDN、WAF、流量清洗      |

#### 数字取证调查（权重10%）

+ 取证基本原则

  + 四项原则：合法性、完整性、客观性、可重复性。
  + 证据链（Chain of Custody）：记录证据的来源、获取方式、存储过程，以证明证据未被篡改或丢失。

+ 数字取证分类

  + 计算机取证（Computer Forensics）
  + 网络取证（Network Forensics）
  + 移动设备取证（Mobile Forensics）
  + 内存取证（Memory Forensics）
  + 云取证（Cloud Forensics）

+ 取证调查流程

  + 识别（Identification）、采集（Collection）、分析（Analysis）、取证报告（Documentation & Reporting）

+ 关键取证技术

  + 硬盘取证

    + 镜像克隆：使用 `dd` 命令或 FTK Imager 创建原始磁盘镜像

    + ```shell
      dd if=/dev/sda of=/mnt/forensics/image.dd bs=4M conv=noerror,sync
      ```

    + 文件恢复：使用 Autopsy 或 Recuva 还原已删除文件。

  + 日志分析

    + 系统日志（Windows Event Log、Linux Syslog）。Web 服务器日志（Apache、Nginx）、防火墙/IDS 日志（Snort、Suricata）、

    + 分析命令

    + ```shell
      grep "Failed password" /var/log/auth.log
      ```

  + 内存取证

    + 提取内存：

    + ```shell
      winpmem.exe --output memory.dump
      ```

    + 分析内存

    + ```shell
      volatility -f memory.dump --profile=Win7x64 pslist
      ```

  + 网络流量取证

    + 抓包分析（Wireshark, tcpdump）：

    + ```shell
      tcpdump -i eth0 -w capture.pcap
      ```

    + 检测可疑通信：

    + ```shell
      tshark -r capture.pcap -Y "ip.src==192.168.1.100"
      ```

+ 取证工具

| **类别**         | **工具**                                     |
| ---------------- | -------------------------------------------- |
| **磁盘取证**     | FTK Imager、Autopsy、EnCase                  |
| **内存取证**     | Volatility、Rekall                           |
| **网络取证**     | Wireshark、Zeek、NetFlow                     |
| **日志分析**     | ELK（Elasticsearch+Logstash+Kibana）、Splunk |
| **恶意软件分析** | Cuckoo Sandbox、IDA Pro                      |

#### 网络安全渗透（权重25%）

+ 信息收集与侦察
+ 漏洞扫描与评估
  + 自动化漏洞扫描：利用 Nessus、OpenVAS、Qualys 等工具扫描系统和应用漏洞。
  + 漏洞库及规则：熟悉 CVE 数据库、漏洞原理及利用条件，了解常见漏洞（如 SQL 注入、XSS、CSRF、文件包含等）。
+ 漏洞利用与渗透攻击
  + 使用 Metasploit、Exploit-DB 等平台辅助漏洞利用。
  + 漏洞利用技术：
    + 缓冲区溢出：利用内存溢出漏洞执行任意代码。
    + Web 应用漏洞利用：SQL 注入、命令注入、跨站脚本攻击（XSS）、跨站请求伪造（CSRF）。
    + 协议与服务漏洞：针对 FTP、SMTP、SNMP、SMB 等协议的漏洞利用。
  + 社会工程学：利用钓鱼、诱骗、社交网络信息等方式获取初始访问权限。
+ 权限提升与横向渗透
  + 本地提权：利用系统配置错误、漏洞或弱口令等手段提升用户权限到管理员级别。
  + 横向移动：利用内网信任关系和弱点，通过侧向扫描、凭证滥用等方式扩散攻击面。
  + 持久化：在目标系统上建立后门或其它持续访问手段。
+ 无线网络与物理安全渗透
  + 无线网络攻击：针对 Wi-Fi 安全（如 WEP/WPA/WPA2/WPA3）的破解、伪基站、中间人攻击等。
  + 物理安全：包括对目标物理设备、门禁系统、USB 攻击等方面的测试。
+ 工具使用与技术手段
  + 自动化工具：Nmap、Nikto、Burp Suite、sqlmap 等。
  + 手工测试技巧：脚本编写、逆向工程、漏洞原理复现。